<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tomás Urzúa">
<meta name="dcterms.date" content="2025-10-13">

<title>Informe final de Práctica Profesional: Observatorio de Cohesión Social, COES</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="informe-practica_files/libs/clipboard/clipboard.min.js"></script>
<script src="informe-practica_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="informe-practica_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="informe-practica_files/libs/quarto-html/popper.min.js"></script>
<script src="informe-practica_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="informe-practica_files/libs/quarto-html/anchor.min.js"></script>
<link href="informe-practica_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="informe-practica_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="informe-practica_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="informe-practica_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="informe-practica_files/libs/bootstrap/bootstrap-ec308324b1d531e4cfa8cd6e57d4a5a8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Informe final de Práctica Profesional: Observatorio de Cohesión Social, COES</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tomás Urzúa </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 13, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="1">
    <h2 id="toc-title">Contenidos</h2>
   
  <ul class="collapse">
  <li><a href="#información-general" id="toc-información-general" class="nav-link active" data-scroll-target="#información-general"><span class="header-section-number">1</span> Información general</a></li>
  <li><a href="#sobre-la-institución" id="toc-sobre-la-institución" class="nav-link" data-scroll-target="#sobre-la-institución"><span class="header-section-number">2</span> Sobre la institución</a></li>
  <li><a href="#descripción-de-labores-realizadas" id="toc-descripción-de-labores-realizadas" class="nav-link" data-scroll-target="#descripción-de-labores-realizadas"><span class="header-section-number">3</span> Descripción de labores realizadas</a>
  <ul class="collapse">
  <li><a href="#construcción-y-mantención-de-página-web" id="toc-construcción-y-mantención-de-página-web" class="nav-link" data-scroll-target="#construcción-y-mantención-de-página-web"><span class="header-section-number">3.1</span> Construcción y mantención de página web</a></li>
  <li><a href="#propuesta-teórica---operacional-de-instrumentos-de-medición" id="toc-propuesta-teórica---operacional-de-instrumentos-de-medición" class="nav-link" data-scroll-target="#propuesta-teórica---operacional-de-instrumentos-de-medición"><span class="header-section-number">3.2</span> Propuesta teórica - operacional de instrumentos de medición</a></li>
  <li><a href="#preparación-análisis-y-visualización-de-datos" id="toc-preparación-análisis-y-visualización-de-datos" class="nav-link" data-scroll-target="#preparación-análisis-y-visualización-de-datos"><span class="header-section-number">3.3</span> Preparación, análisis y visualización de datos</a></li>
  <li><a href="#elaboración-de-documentos" id="toc-elaboración-de-documentos" class="nav-link" data-scroll-target="#elaboración-de-documentos"><span class="header-section-number">3.4</span> Elaboración de documentos</a></li>
  <li><a href="#coordinación-logística-de-foros" id="toc-coordinación-logística-de-foros" class="nav-link" data-scroll-target="#coordinación-logística-de-foros"><span class="header-section-number">3.5</span> Coordinación logística de foros</a></li>
  </ul></li>
  <li><a href="#aprendizajes-de-la-práctica-profesional" id="toc-aprendizajes-de-la-práctica-profesional" class="nav-link" data-scroll-target="#aprendizajes-de-la-práctica-profesional"><span class="header-section-number">4</span> Aprendizajes de la Práctica Profesional</a></li>
  <li><a href="#autoevaluación" id="toc-autoevaluación" class="nav-link" data-scroll-target="#autoevaluación"><span class="header-section-number">5</span> Autoevaluación</a></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="información-general" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Información general</h1>
<p><strong>Institución</strong></p>
<p>Observatorio de Cohesión Social (OCS) - Centro de Estudios de Conflicto y Cohesión Social (COES).</p>
<p><strong>Supervisor de la práctica</strong></p>
<p>Andreas Laffert - Coordinador del Observatorio de Cohesión Social.</p>
<p>Sociólogo, Universidad de Chile; Mg. en Sociología, Pontificia Universidad Católica.</p>
<p><strong>Profesor guía</strong></p>
<p>Juan Carlos Castillo - Profesor titular del Departamento de Sociología, Facultad de Ciencias Sociales, Universidad de Chile.</p>
<p>Doctor en Sociología, Universidad de Humboldt de Berlín; Magíster en Public Management, Universidad de Potsdam; Licenciado en Psicología, Pontificia Universidad Catolica de Valparaíso.</p>
<p><strong>Registro temporal de la práctica</strong></p>
<p>Fecha de inicio: 02 de mayo de 2025.</p>
<p>Fecha de término: 31 de agosto de 2025.</p>
<p>Modalidad: Presencial, media jornada (20 horas semanales).</p>
<p>Horas totales: 360 horas.</p>
</section>
<section id="sobre-la-institución" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Sobre la institución</h1>
<p>Para profundizar sobre el Observatorio de Cohesión Social, primero es necesario dar a conocer el proyecto que lo enmarca: el <a href="https://coes.cl">Centro de Estudios de Conflicto y Cohesión Social (COES)</a>. COES nace de un FONDAP el año 2014 con el objetivo de abordar las diversas dinámicas que se dan en los procesos de tensión y fortalecimiento del lazo social. Desde un enfoque multidisciplinario, el centro ha contribuido durante más de diez años a la producción de conocimiento, orientado a nutrir el debate público y político con el propósito de aportar al desarrollo y bienestar del país.</p>
<p>En el contexto de COES nace el OCS, un Observatorio que ha concentrado sus esfuerzos en la producción y difusión de conocimiento sobre la cohesión social desde un enfoque empírico. El OCS ha sido propulsor de varios marcos de medición de la cohesión social a nivel nacional y regional, esto con el fin de poder acercar el concepto al campo práctico, volviéndolo medible y, a la misma vez, comprensible desde los hechos. Durante su trayectoria se han elaborado investigaciones, informes e incluso visualizaciones interactivas, todo ello puesto a disposición de la ciudadanía a través del acceso abierto a sus trabajos.</p>
</section>
<section id="descripción-de-labores-realizadas" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Descripción de labores realizadas</h1>
<section id="construcción-y-mantención-de-página-web" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="construcción-y-mantención-de-página-web"><span class="header-section-number">3.1</span> Construcción y mantención de página web</h2>
<p>Uno de los objetivos principales en la planificación del OCS era construir un sitio web que tuviera la función de visibilizar, difundir y volver más accesible a la ciudadanía el trabajo realizado por el Observatorio a lo largo de los años. Con esto en mente, se creó el sitio <a href="https://ocs-coes.com">ocs-coes.com</a>.</p>
<p>El proceso de construcción se realizó mediante Quarto, proceso el cual se caracterizó por un trabajo iterativo que permitiera llegar a una página que cumpliera con dos máximas: un diseño pulcro que diera cuenta del tono académico/investigativo de la web (1), y un formato que fuese lo más intuitivo posible, garantizando al usuario la mejor experiencia al navegar por las distintas secciones de la página.</p>
<p>Dentro de la página se generaron diversas secciones, tal como la de noticias, donde se añadieron los principales hitos que tenía programado el Observatorio para aquel entonces. Asimismo, se creó una sección de reportes, la cual cumplió el propósito de sistematizar y ordenar todos los documentos (artículos, informes, presentaciones, entre otros) en que estuviera involucrado el Observatorio para disponerlos abiertamente a los usuarios.</p>
<p>Una vez lista la página web, se llevaron a cabo labores de actualización del estado del sitio. Esto implicó la subida de posts a la sección de noticias a medida que ocurrían hitos que requerían difusión, así como la solución de errores del sitio cuando algo dejaba de funcionar correctamente.</p>
</section>
<section id="propuesta-teórica---operacional-de-instrumentos-de-medición" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="propuesta-teórica---operacional-de-instrumentos-de-medición"><span class="header-section-number">3.2</span> Propuesta teórica - operacional de instrumentos de medición</h2>
<p>El OCS ya había creado anteriormente instrumentos de medición que operacionalizaban la cohesión social, y con el propósito de generar instrumentos actualizados, más pertinentes y completos, se plantearon dos propuestas: el marco de medición para América Latina y el marco de medición para Chile<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>La propuesta centrada en América Latina fue realizada utilizando datos principalmente de la encuesta <a href="https://ropercenter.cornell.edu/latin-american-public-opinion-project-lapop">Latin American Public Opinion Project (LAPOP)</a>, y de manera auxiliar se recurrió a <a href="https://www.latinobarometro.org">Latinobarómetro</a> para complementar la información. Por su parte, la propuesta pensada en Chile se llevó a cabo utilizando datos únicamente de <a href="https://conferencias.coes.cl/encuesta-panel">El Estudio Longitudinal Social de Chile (ELSOC)</a>.</p>
<p>Para concretar esta tarea, el trabajo consistió, en primer lugar, realizar una revisión bibliográfica de las propuestas anteriores del OCS y de medición de cohesión social a nivel general (Castillo et al 2021a, Castillo et al 2021b). Luego, se pensaron las dimensiones que permitirían operacionalizar la cohesión social a partir de lo ya revisado y de la disponibilidad de datos, es decir, la construcción de la propuesta fue contemplada desde un sentido teórico y empírico. Con las propuestas ya esquematizadas, se estudiaron los datos aplicando análisis de validez de constructos (EFA y CFA), para corroborar que la construcción teórica del instrumento fuera viable también en su dimensión estadística.</p>
</section>
<section id="preparación-análisis-y-visualización-de-datos" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="preparación-análisis-y-visualización-de-datos"><span class="header-section-number">3.3</span> Preparación, análisis y visualización de datos</h2>
<p>base de variables contextuales - foro I</p>
<p>análisis confirmatorios, descriptivos, bivariados y gráficos para documentos</p>
</section>
<section id="elaboración-de-documentos" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="elaboración-de-documentos"><span class="header-section-number">3.4</span> Elaboración de documentos</h2>
<p>Todas las tareas desarrolladas en el OCS tuvieron como finalidad ser sistematizadas en productos que permitieran la divulgación de los hallazgos, los cuales fueron difundidos en instancias de debate académico, público y en la página web.</p>
<p>Para la elaboración de los documentos, se organizó el trabajo ya realizado (los dos puntos anteriores) y se estructuró en diversos formatos en función de la necesidad y el público dirigido. En este contexto, se produjeron informes de resultados, cuyo contenido era una síntesis de resultados de los análisis en torno a la cohesión social, incluyendo gráficos e interpretaciones. También se crearon presentaciones, las cuales contuvieron visualización de datos, pero también contenido más sustantivo para desplegar un argumento, con tal de atraer a la audiencia y relevar el trabajo del OCS en materia de cohesión social. Por último, se elaboraron documentos de trabajo, que incluirían todo lo anteriormente mencionado, pero de manera más explayada y detallada, integrando esquemas conceptuales, tablas de disponibilidad y operacionalización de variables, análisis de datos e interpretación de resultados.</p>
<p>Es sumamente importante destacar que todos los documentos generados en el proceso de la Práctica Profesional fueron hechos con Quarto y siguiendo principios de Ciencia Abierta, cuya aplicación práctica tiene el objetivo de transparentar los flujos de trabajo y la investigación misma, así como facilitar el acceso a los productos.</p>
</section>
<section id="coordinación-logística-de-foros" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="coordinación-logística-de-foros"><span class="header-section-number">3.5</span> Coordinación logística de foros</h2>
<p>A lo largo del período de práctica, se celebraron dos hitos claves para el OCS: el Foro I de Cohesión Social, el cual fue organizado junto a <a href="https://www.cepal.org/es">CEPAL</a>, y el Foro II de Cohesión Social, que contó con la participación del <a href="https://www.cepchile.cl">Centro de Estudios Públicos</a>.</p>
<p>En el marco de estos hitos, se tuvo que realizar un trabajo orientado a la logística de los eventos, pasando por dos momentos claves: la organización previa al foro (1) y la organización el día del foro (2). En el primer punto se encuentran actividades de gestión externa, como el coordinar con miembros de la contraparte, y también de gestión interna, como la impresión de documentos y organización de merchandising para el día del hito respectivo. En el segundo punto se llevaron a cabo tareas de planificación del espacio, como preparar el espacio para recibir a los asistentes y guiar al público para asegurar su llegada al salón del evento. Por último, en el proceso de coordinación el día del foro, se verificó tanto con el equipo interno como con la contraparte que todos los recursos (presentaciones, transmisión, entre otras) estuvieran disponibles para asegurarse que la ejecución del hito estuviera exenta de imprevistos.</p>
</section>
</section>
<section id="aprendizajes-de-la-práctica-profesional" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Aprendizajes de la Práctica Profesional</h1>
<p>El proceso de la Práctica Profesional ha contribuido significativamente mi formación, y pretendiendo dar cuenta de manera clara los aportes que me ha traído, los dividiré términos técnicos y laborales.</p>
<p>En cuanto a aspectos técnicos, he logrado profundizar sustancialmente mis conocimientos en el área cuantitativa de la sociología, consolidando conocimientos que fueron adquiridos en mi formación académica (como lo impartido en los tres cursos de estadística), pero sobre todo logrando aprender y ampliar el repertorio de herramientas metodológicas y estadísticas que puedo emplear en el ámbito de la investigación empírica.</p>
<p>La construcción operacional de un marco de medición y su sometimiento a análisis confirmatorios me han permitido dar cuenta de la importancia que supone construir un instrumento, pero también que este instrumento sea válido estadísticamente hablando, adquiriendo así una nueva perspectiva para mi quehacer sociológico relacionado a la relevancia de la medición.</p>
<p>Siguiendo en la línea de los aprendizajes técnicos, he llegado a comprender la lógica detrás de la construcción de una página web, siendo capaz de poder construir un sitio por mi cuenta. Esto, junto a la creación de documentos fundamentados en la Ciencia Abierta, me han enseñado el orden y estructura que debe seguir un tipo de documento dependiendo del contexto y el propósito que tiene, así como el garantizar la difusión y accesibilidad a los trabajos. Estos principios se han integrado a mis expectativas de trabajo, marcando un punto de inflexión en la manera de concebir y desarrollar mis obligaciones académicas y laborales.</p>
<p>Desde los aprendizajes laborales, considero que el ambiente del OCS se constituye bajo un estándar de alta calidad, lo que se expresa en la prolijidad que debe caracterizar cualquier producto que se crea, mas también en la dedicación que impregnan los demás integrantes en su trabajo. Por ello, la posibilidad de tener mi primer acercamiento al mundo laboral de las ciencias sociales en el Observatorio me permitió nutrirme enormemente de las más grandes cualidades que se consideran en un trabajo, esto es, puntualidad, asertividad, trabajo en equipo, entre muchas otras. En suma, finalizado mi período de práctica en el OCS, he podido ampliar fundamentalmente mi visión en el mundo laboral, ahora con la capacidad de dilucidar las expectativas que tiene una institución en el desempeño de sus trabajadores, pero también me he vuelto capaz de llevar a cabo labores que requieren el despliegue de habilidades analíticas, lógicas y reflexivas, formándome como un sujeto competente en el mercado laboral.</p>
</section>
<section id="autoevaluación" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Autoevaluación</h1>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Cabe aclarar que mi rol en la construcción del marco de medición para América Latina fue más bien de apoyo, mientras que la propuesta enfocada en Chile fue pensada, construida y validada en su totalidad por mí.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>